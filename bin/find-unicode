#!/usr/bin/ruby

DATA_FILE = '/usr/share/unicode/UnicodeData.txt'

re = Regexp.new(ARGV.join(' ').downcase)

f = File.new(DATA_FILE)
lines = f.readlines.map { |l| l.split(';') }
entries = {}
lines.each { |l| entries[l[1].downcase] = l[0].to_i(16) }

results = entries.select { |k, _| re.match(k) }

if results.size == 1
  puts results.values[0].chr(Encoding::UTF_8)
else
  results.each do |name, codepoint|
    $stderr.puts "#{name}: #{codepoint}: #{codepoint.chr(Encoding::UTF_8)}"
  end
end
