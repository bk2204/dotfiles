#!/bin/sh

set -e

JAR_HOME=$HOME/bin/msv-impl
JAR_DIR=/usr/share/java

[ -n "$JAVA_EXE" ] || JAVA_EXE=java

add_to_classpath () {
	test -e "$1" || ( echo "couldn't find $1"; exit 2 )
	if [ -n "$CLASSPATH" ]; then
		CLASSPATH="$CLASSPATH:$1"
	else
		CLASSPATH="$1"
	fi
}

add_to_classpath /etc/xml/resolver
add_to_classpath "$JAR_DIR/xml-resolver.jar"
add_to_classpath "$JAR_DIR/xercesImpl.jar"
add_to_classpath "$JAR_DIR/xmlParserAPIs.jar"
add_to_classpath "$JAR_DIR/iri.jar"
add_to_classpath "$JAR_DIR/isorelax.jar"
add_to_classpath "$JAR_DIR/relaxngDatatype.jar"
add_to_classpath "$JAR_DIR/xsdlib.jar"

exec $JAVA_EXE -cp "$CLASSPATH" -jar "$JAR_HOME/msv.jar" "$@"
