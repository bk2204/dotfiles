diff -ur ttyrec.old/Makefile ttyrec-1.0.6/Makefile
--- ttyrec.old/Makefile	2007-11-23 19:11:50.000000000 +0000
+++ ttyrec-1.0.6/Makefile	2007-11-23 19:17:51.000000000 +0000
@@ -1,5 +1,6 @@
 CC = gcc
-CFLAGS = -O2
+CFLAGS = -O2 -DHAVE_openpty
+LIBS = -lutil
 VERSION = 1.0.6
 
 TARGET = ttyrec ttyplay ttytime
@@ -10,13 +11,13 @@
 all: $(TARGET)
 
 ttyrec: ttyrec.o io.o
-	$(CC) $(CFLAGS) -o ttyrec ttyrec.o io.o
+	$(CC) $(CFLAGS) -o ttyrec ttyrec.o io.o $(LIBS)
 
 ttyplay: ttyplay.o io.o
-	$(CC) $(CFLAGS) -o ttyplay ttyplay.o io.o
+	$(CC) $(CFLAGS) -o ttyplay ttyplay.o io.o $(LIBS)
 
 ttytime: ttytime.o io.o
-	$(CC) $(CFLAGS) -o ttytime ttytime.o io.o
+	$(CC) $(CFLAGS) -o ttytime ttytime.o io.o $(LIBS)
 
 clean:
 	rm -f *.o $(TARGET) ttyrecord *~
diff -ur ttyrec.old/ttyrec.c ttyrec-1.0.6/ttyrec.c
--- ttyrec.old/ttyrec.c	2007-11-23 19:11:50.000000000 +0000
+++ ttyrec-1.0.6/ttyrec.c	2007-11-23 19:14:05.000000000 +0000
@@ -70,8 +70,12 @@
 #define _(FOO) FOO
 
 #ifdef HAVE_openpty
+#ifdef __GLIBC__
+#include <pty.h>
+#else
 #include <libutil.h>
 #endif
+#endif
 
 #if defined(SVR4) && !defined(CDEL)
 #if defined(_POSIX_VDISABLE)
